<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Search results - <%= shopData && shopData.shopName ? shopData.shopName : "Bertie's Books" %></title>
    <link rel="stylesheet"  type="text/css" href="/main.css" />
  </head>
  <body>
    <div class="panel">
      <h1><%= shopData && shopData.shopName ? shopData.shopName : "Bertie's Books" %></h1>
      <h2>Search results for "<%= (typeof searchTerm !== 'undefined' ? searchTerm : '') %>"</h2>
      <p><%= Array.isArray(books) ? books.length : 0 %> result(s) found.</p>

      <ul class="book-list">
        <% if (Array.isArray(books) && books.length) { %>
          <% books.forEach(function(book) { %>
            <% var title = book.title || book.book_title || book.name || book.book || 'Untitled'; %>
            <% var rawPrice = book.price || book.cost || book.value || book.price_pounds || book.amount || 0; %>
            <% var price = (isNaN(Number(rawPrice)) ? rawPrice : Number(rawPrice).toFixed(2)); %>
            <li><%= title %>, Â£<%= price %></li>
          <% }) %>
        <% } else { %>
          <li>No books found.</li>
        <% } %>
      </ul>

      <p><a href="/books/search">Back to search</a> | <a href="/books/list">View all books</a></p>
    </div>
  </body>
</html>
